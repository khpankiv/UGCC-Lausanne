{# templates/pages/index.njk #}
{% if page == 'index' %}

  {# 1) Next liturgy highlight #}
  {% set arr = sections.schedule | sort_by_time %}
  {% set next = arr and arr[0] %}
  {% if next %}
  <section class="next-liturgy">
    <div class="container">
      <div class="next-grid list-card">
        <div class="next-media">
          <img src="/assets/images/prayer.png" alt="Prayer">
        </div>
        <div class="next-info">
          <h2>{{ next_liturgy_title }}</h2>
          <h3>{{ next.title }}</h3>
          <p class="meta"><i class="fa-regular fa-calendar-days"></i> <time>{{ (next.timestamp or next.date) | format_date(lang) }}</time>{% if next.time %} â€¢ <i class="fa-regular fa-clock"></i> {{ next.time }}{% endif %}</p>
          {% if next.location %}<p class="meta"><i class="fa-solid fa-location-dot"></i> {{ next.location }}</p>{% endif %}
          {% if next.details %}<p class="lead">{{ next.details }}</p>{% endif %}
        </div>
      </div>
    </div>
  </section>
  {% endif %}

  {# 2) Short announcements #}
  {% if sections.announcements and sections.announcements.length %}
  <section class="home-announcements">
    <div class="container">
      <h2>{{ announcements_title }}</h2>
      <ul class="brief-list">
        {% for item in sections.announcements | take(0,3) %}
          <li>
            <span class="title">{{ item.title }}</span>
            {% if item.timestamp or item.date %}<time class="date">{{ (item.timestamp or item.date) | format_date(lang) }}</time>{% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  </section>
  {% endif %}

{% endif %}

  <!-- News (3 cards) -->
  {% set title = latest_news_title %}
  <section class="home-section">
    <div class="container">
      <h2>{{ title }}</h2>
      <div class="cards-grid cols-3">
        {% for item in sections.news | take(0,3) %}
          {% include "partials/card-article.njk" %}
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Spiritual (3 cards) -->
  {% set title = spiritual_title %}
  <section class="home-section">
    <div class="container">
      <h2>{{ title }}</h2>
      <div class="cards-grid cols-3">
        {% for item in sections.spiritual | take(0,3) %}
          {% include "partials/card-article.njk" %}
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Community (3 cards) -->
  {% set title = community_title %}
  <section class="home-section">
    <div class="container">
      <h2>{{ title }}</h2>
      <div class="cards-grid cols-3">
        {% for item in sections.community | take(0,3) %}
          {% include "partials/card-article.njk" %}
        {% endfor %}
      </div>
    </div>
  </section>

